<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookFolk Challenge 2025 - Book Entry</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }
        
        h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            color: #718096;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #2d3748;
            font-weight: 600;
            font-size: 14px;
        }
        
        input[type="email"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="email"]:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .rating-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .rating-option {
            flex: 1;
            min-width: 80px;
        }
        
        .rating-option input[type="radio"] {
            display: none;
        }
        
        .rating-option label {
            display: block;
            padding: 15px;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .rating-option input[type="radio"]:checked + label {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: scale(1.05);
        }
        
        .rating-option label:hover {
            border-color: #667eea;
        }
        
        .rating-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 12px;
            color: #718096;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #48bb78;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4);
        }
        
        .btn-primary:disabled,
        .btn-secondary:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }
        
        .success-message {
            background: #c6f6d5;
            border: 2px solid #48bb78;
            color: #22543d;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .error-message {
            background: #fed7d7;
            border: 2px solid #fc8181;
            color: #742a2a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .note {
            background: #fef5e7;
            border-left: 4px solid #f39c12;
            padding: 12px;
            margin-bottom: 20px;
            border-radius: 4px;
            font-size: 14px;
            color: #7d6608;
            display: none;
        }
        
        .book-count {
            font-size: 12px;
            color: #718096;
            font-style: italic;
            margin-top: 5px;
        }
        
        .summary {
            background: #ebf8ff;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .summary h3 {
            color: #2c5282;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .summary-item {
            background: white;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }
        
        .summary-item strong {
            color: #2d3748;
        }
        
        .summary-item span {
            color: #718096;
            font-size: 14px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .rating-container {
                flex-direction: column;
            }
            
            .rating-option {
                min-width: 100%;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“š BookFolk Challenge 2025</h1>
        <p class="subtitle">Rate the books you've read</p>
        
        <div id="debugStatus" style="background: #e6f7ff; padding: 10px; margin-bottom: 15px; border-radius: 5px; font-size: 12px; display: none;">
            <strong>Status:</strong> <span id="statusText">Loading...</span>
        </div>
        
        <div class="success-message" id="successMessage"></div>
        <div class="error-message" id="errorMessage"></div>
        
        <form id="bookForm">
            <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" required 
                       placeholder="your.email@example.com">
            </div>
            
            <div class="form-group">
                <label for="category">Select Category *</label>
                <select id="category" name="category" required>
                    <option value="">Loading categories...</option>
                </select>
                <div class="book-count" id="bookCount"></div>
            </div>
            
            <div class="note" id="categoryNote"></div>
            
            <div class="form-group">
                <label for="book">Select Book *</label>
                <select id="book" name="book" required disabled>
                    <option value="">-- First select a category --</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Rating *</label>
                <div class="rating-container">
                    <div class="rating-option">
                        <input type="radio" id="rating1" name="rating" value="1.0" required>
                        <label for="rating1">1.0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="rating2" name="rating" value="2.0">
                        <label for="rating2">2.0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="rating3" name="rating" value="3.0">
                        <label for="rating3">3.0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="rating4" name="rating" value="4.0">
                        <label for="rating4">4.0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="rating5" name="rating" value="5.0">
                        <label for="rating5">5.0</label>
                    </div>
                </div>
                <div class="rating-labels">
                    <span>Poor</span>
                    <span>Excellent</span>
                </div>
            </div>
            
            <div class="button-group">
                <button type="submit" class="btn-primary">Submit Rating</button>
            </div>
        </form>
        
        <div class="summary" id="summary" style="display: none;">
            <h3>Books Rated This Session:</h3>
            <div id="summaryList"></div>
            <div class="button-group" style="margin-top: 20px;">
                <button type="button" class="btn-secondary" onclick="addAnother()">
                    Rate Another Book
                </button>
            </div>
        </div>
    </div>

    <script>
        // Book data will be embedded here
        const BOOK_DATA = {
  "If You're Not First, You're Last": {
    "books": [
      {
        "title": "A Court of Thorns and Roses",
        "author": "Sarah J. Maas"
      },
      {
        "title": "A Little Hatred",
        "author": "Joe Abercrombie"
      },
      {
        "title": "A Memory Called Empire",
        "author": "Arkady Martine"
      },
      {
        "title": "A Path to Power",
        "author": "Robert A. Caro"
      },
      {
        "title": "A Study in Charlotte",
        "author": "Brittany Cavallaro"
      },
      {
        "title": "Always Outnumbered, Always Outgunned",
        "author": "Walter Mosley"
      },
      {
        "title": "Ancillary Justice",
        "author": "Ann Leckie"
      },
      {
        "title": "Call the midwife : a memoir of birth, joy, and hard times",
        "author": "Jennifer Worth"
      },
      {
        "title": "Deal with the Devil",
        "author": "Ron Schwab"
      },
      {
        "title": "Dune",
        "author": "Frank Herbert"
      },
      {
        "title": "Emily Wilde's Encyclopaedia of Faeries",
        "author": "Heather Fawcett"
      },
      {
        "title": "Empire of Silence",
        "author": "Christopher Ruocchio"
      },
      {
        "title": "Fourth Wing",
        "author": "Rebecca Yarros"
      },
      {
        "title": "Heck's Journey",
        "author": "John Deacon"
      },
      {
        "title": "House of Earth and Blood",
        "author": "Sarah J. Maas"
      },
      {
        "title": "Interview with the Vampire",
        "author": "Anne Rice"
      },
      {
        "title": "Jade City",
        "author": "Fonda Lee"
      },
      {
        "title": "Leviathan Wakes",
        "author": "S. A. Corey"
      },
      {
        "title": "Lord Foul's Bane",
        "author": "Stephen Donaldson"
      },
      {
        "title": "Name of the Wind",
        "author": "Patrick Rothfuss"
      },
      {
        "title": "Nevermoor: The Trials of Morrigan Crow",
        "author": "Jessica Townsend"
      },
      {
        "title": "Outlander",
        "author": "Diana Gabaldon"
      },
      {
        "title": "Red Rising",
        "author": "Pierce Brown"
      },
      {
        "title": "Senlin Ascends",
        "author": "Josiah Bancroft"
      },
      {
        "title": "Shards of Earth",
        "author": "Adrian Tchaikovsky"
      },
      {
        "title": "Shield of Sparrows",
        "author": "Deveny Perry"
      },
      {
        "title": "Starfish",
        "author": "Peter Watts"
      },
      {
        "title": "Steelheart",
        "author": "Brandon Sanderson"
      },
      {
        "title": "The Alienist",
        "author": "Caleb Carr"
      },
      {
        "title": "The British are coming",
        "author": "Rick Atkinson"
      },
      {
        "title": "The Duke and I",
        "author": "Julia Quinn"
      },
      {
        "title": "The Fellowship of the Ring",
        "author": "J.R.R. Tolkien"
      },
      {
        "title": "The Girl with the Dragon Tattoo",
        "author": "Stieg Larsson"
      },
      {
        "title": "The Glass Sentence",
        "author": "S.E. Grove"
      },
      {
        "title": "The Inheritance Games",
        "author": "Jennifer Lynn Barnes"
      },
      {
        "title": "The Knight and the Moth",
        "author": "Rachel Gillig"
      },
      {
        "title": "The Morning River",
        "author": "W. Michael Gear"
      },
      {
        "title": "The Rise of Wolf 8",
        "author": "Rick McIntyre"
      },
      {
        "title": "The Ruin of Kings",
        "author": "Jenn Lyons"
      },
      {
        "title": "The Screaming Staircase",
        "author": "Jonathan Stroud"
      },
      {
        "title": "The Shadow of the Gods",
        "author": "John Gwynn"
      },
      {
        "title": "The Sweetness at the Bottom of the Pie",
        "author": "Alan Bradley"
      },
      {
        "title": "The Thursday Murder Club",
        "author": "Richard Osman"
      },
      {
        "title": "The Unkindness of Ravens",
        "author": "M. E. Hilliard"
      },
      {
        "title": "The Wild Inside",
        "author": "Christine Carbo"
      }
    ],
    "note": ""
  },
  "Fur-Babies": {
    "books": [
      {
        "title": "A Dogs Way Home",
        "author": "W. Bruce Cameron"
      },
      {
        "title": "Alex and Me",
        "author": "Irene M. Pepperberg"
      },
      {
        "title": "All Creatures Great and Small",
        "author": "James Herriot"
      },
      {
        "title": "Animals Make Us Human",
        "author": "Temple Grandin"
      },
      {
        "title": "Another Insane Devotion",
        "author": "Peter Trachtenberg"
      },
      {
        "title": "Ape House",
        "author": "Sara Gruen"
      },
      {
        "title": "Arnie, The Darling Starling",
        "author": "Margarete Corbo"
      },
      {
        "title": "Blood Memory",
        "author": "Dayton Duncan"
      },
      {
        "title": "Chicken Soup for the Pet Lover's Soul",
        "author": "Various"
      },
      {
        "title": "Chosen by a Horse",
        "author": "Susan Richards"
      },
      {
        "title": "Cougars on the Cliff",
        "author": "Maurice G. Hornocker"
      },
      {
        "title": "Demon Fish",
        "author": "Juliet Eilperin"
      },
      {
        "title": "Dewey",
        "author": "Vicki Myron"
      },
      {
        "title": "Dr. Calhoun's Mousery",
        "author": "Lee Alan Dugatkin"
      },
      {
        "title": "Eager",
        "author": "Ben Goldfarb"
      },
      {
        "title": "Fairy Tale",
        "author": "Stephen King"
      },
      {
        "title": "Feathers",
        "author": "Thor Hanson"
      },
      {
        "title": "Follow the Rabbit-Proof Fence",
        "author": "Doris Pilkington"
      },
      {
        "title": "Four Blind Mice",
        "author": "James Patterson"
      },
      {
        "title": "Horse Heaven Hill",
        "author": "Zane Grey"
      },
      {
        "title": "Ice Walker",
        "author": "James Raffan"
      },
      {
        "title": "Indian Horse",
        "author": "Richard Wagamese"
      },
      {
        "title": "Lamb: The Gospel according to Biff, Christ's Childhood Pal",
        "author": "Christopher Moore"
      },
      {
        "title": "Lessons from Lucy",
        "author": "Dave Barry"
      },
      {
        "title": "Lion & Lamb",
        "author": "James Patterson"
      },
      {
        "title": "Marley & Me",
        "author": "John Grogan"
      },
      {
        "title": "Meph, the Pet Skunk",
        "author": "Jean Craighead George"
      },
      {
        "title": "Merle's Door",
        "author": "Ted Kerasote"
      },
      {
        "title": "Of Mice and Men",
        "author": "John Steinbeck"
      },
      {
        "title": "On the Wing",
        "author": "Alan Tennant"
      },
      {
        "title": "Rin Tin Tin",
        "author": "Susan Orlean"
      },
      {
        "title": "Ring of Bright Water",
        "author": "Gavin Maxwell"
      },
      {
        "title": "Saving Sadie",
        "author": "Joal Derse Dauer"
      },
      {
        "title": "Scent of the Missing",
        "author": "Susannah Charleson"
      },
      {
        "title": "Shy Creatures",
        "author": "Clare Chambers"
      },
      {
        "title": "So Long, and Thanks for all the Fish",
        "author": "Douglas Adams"
      },
      {
        "title": "Started Early, Took My Dog",
        "author": "Kate Atkinson"
      },
      {
        "title": "The Bat",
        "author": "Jo Nesb\u00f8"
      },
      {
        "title": "The Curious Incident of the Dog in the Nighttime",
        "author": "Mark Haddon"
      },
      {
        "title": "The Dogs of Babel",
        "author": "Carolyn Parkhurst"
      },
      {
        "title": "The Horse Whisperer",
        "author": "Nicholas Evans"
      },
      {
        "title": "The Leopard",
        "author": "Jo Nesbo"
      },
      {
        "title": "The Lion's Game",
        "author": "Nelson DeMille"
      },
      {
        "title": "The Rattle-Rat",
        "author": "Janwillem Van de Wetering"
      },
      {
        "title": "The Sinister Pig",
        "author": "Tony Hillerman"
      }
    ],
    "note": ""
  },
  "Vintage Library": {
    "books": [
      {
        "title": "A Bride Goes West",
        "author": "Nannie T. Alderson"
      },
      {
        "title": "Alone",
        "author": "Richard Evelyn Byrd"
      },
      {
        "title": "Band of Angels",
        "author": "Robert Penn Warren"
      },
      {
        "title": "Barchester Towers and the Warden",
        "author": "Anthony Trollope"
      },
      {
        "title": "Bill Subblette: Mountain Man",
        "author": "John E. Sunder"
      },
      {
        "title": "Brave Men",
        "author": "Ernie Pyle"
      },
      {
        "title": "Don Juan: A Satiric Epic of Modern Life",
        "author": "Lord George Gordon Byron"
      },
      {
        "title": "Driftwood Valley",
        "author": "Theodora C. Stanwell-Fletcher"
      },
      {
        "title": "Eleanor of Aquitaine and the Four Kings",
        "author": "Amy Ruth Kelly"
      },
      {
        "title": "Gift from the Sea",
        "author": "Anne Morrow Lindbergh"
      },
      {
        "title": "Gold-Seeking on the Dalton Trail",
        "author": "Arthur Ripley Thompson"
      },
      {
        "title": "Jim Bridger, Mountain Man",
        "author": "Stanley Vestal"
      },
      {
        "title": "Jubilee Trail",
        "author": "Gwen Bristow"
      },
      {
        "title": "Listen! The Wind",
        "author": "Anne Morrow Lindbergh"
      },
      {
        "title": "Marjorie Morningstar",
        "author": "Herman Wouk"
      },
      {
        "title": "Me Papoose Sitter",
        "author": "Dawn Langley Simmons"
      },
      {
        "title": "Mrs. Mike",
        "author": "Benedict Freedman"
      },
      {
        "title": "Nothing too Good for a Cowboy",
        "author": "Richmond P. Hobson"
      },
      {
        "title": "Parade's End",
        "author": "Madox Ford"
      },
      {
        "title": "Safari: A Sage of the African Blue",
        "author": "Martin Johnson"
      },
      {
        "title": "Smoke Bellew",
        "author": "Jack London"
      },
      {
        "title": "Ten North Frederick",
        "author": "John O'Hara"
      },
      {
        "title": "The Bridal Wreath",
        "author": "Sigrid Undset"
      },
      {
        "title": "The Children",
        "author": "Edith Wharton"
      },
      {
        "title": "The Flowers of Evil",
        "author": "Charles Baudelaire"
      },
      {
        "title": "The Grand Alliance",
        "author": "Winston Churchill"
      },
      {
        "title": "The History of Henry Esmond",
        "author": "William Makepeace Thackeray"
      },
      {
        "title": "The Man from the Wilderness",
        "author": "Max Brand"
      },
      {
        "title": "The Man in the Gray Flannel Suit",
        "author": "Sloan Wilson"
      },
      {
        "title": "The Queen's Necklace",
        "author": "Alexandre Dumas"
      },
      {
        "title": "The Razor's Edge",
        "author": "W. Somerset Maugham"
      },
      {
        "title": "The Secret of the Hittites",
        "author": "C.W. Ceram"
      },
      {
        "title": "The Shining Trail",
        "author": "Lola Fuller"
      },
      {
        "title": "The Story of the Other Wise Man",
        "author": "Henry Van Dyke"
      },
      {
        "title": "The White Flag",
        "author": "Gene Stratton-Porter"
      },
      {
        "title": "Wilderness Wife",
        "author": "Kathrene Sutherland Gedney Pinkerton"
      }
    ],
    "note": ""
  },
  "Foreign Voices": {
    "books": [
      {
        "title": "An Elderly Lady is Up to No Good",
        "author": "Helene Trusten"
      },
      {
        "title": "Balzac and the Little Chinese Seamstress",
        "author": "Dai Sijie"
      },
      {
        "title": "Beowulf: A Translation and Commentary",
        "author": "J.R.R. Tolkien"
      },
      {
        "title": "Cold Crematorium",
        "author": "Jozsef Debreczeni"
      },
      {
        "title": "Daughter of Fortune",
        "author": "Isabel Allende"
      },
      {
        "title": "Eva's Eye",
        "author": "Karin Fossum"
      },
      {
        "title": "Hakim's Odyssey",
        "author": "Fabien Toulm\u00e9"
      },
      {
        "title": "Homo Deus: A Brief History of Tomorrow",
        "author": "Yuval Noah Harari"
      },
      {
        "title": "Inkheart",
        "author": "Cornelia Funke"
      },
      {
        "title": "Lady Death: The Memoirs of Stalin's Sniper",
        "author": "Lyudmila Pavlichenko"
      },
      {
        "title": "Markings",
        "author": "Dag Hammarskj\u00f6ld"
      },
      {
        "title": "My Brilliant Friend",
        "author": "Elena Ferrante"
      },
      {
        "title": "My friends",
        "author": "Fredrik Backman"
      },
      {
        "title": "My name is Emilia del Valle",
        "author": "Isabel Allende"
      },
      {
        "title": "Night",
        "author": "Elie Wiesel"
      },
      {
        "title": "One Hundred Years of Solitude",
        "author": "Gabriel Garc\u00eda M\u00e1rquez"
      },
      {
        "title": "Siddhartha",
        "author": "Hermann Hesse"
      },
      {
        "title": "Spark Joy: An Illustrated Master Class on the Art of Organization and Tidying Up",
        "author": "Marie Kond\u014d"
      },
      {
        "title": "Stolen Lives: Twenty Years in a Desert Jail",
        "author": "Malika Oufkir and Mich\u00e8le Fitoussi"
      },
      {
        "title": "Strange Houses",
        "author": "Uketsu"
      },
      {
        "title": "The Art of War",
        "author": "Sun Tzu"
      },
      {
        "title": "The Bat",
        "author": "Jo Nesb\u00f8"
      },
      {
        "title": "The Diary of a Young Girl",
        "author": "Anne Frank"
      },
      {
        "title": "The Girl Who Lived Twice",
        "author": "David Lagercrantz"
      },
      {
        "title": "The Girl with a Dragon Tattoo",
        "author": "Stieg Larsson"
      },
      {
        "title": "The Man from Beijing",
        "author": "Henning Mankell"
      },
      {
        "title": "The Man in the Ice",
        "author": "Konrad Spindler"
      },
      {
        "title": "The Plague",
        "author": "Albert Camus"
      },
      {
        "title": "The Readers of Broken Wheel Recommend",
        "author": "Katarine Bivald"
      },
      {
        "title": "The Shadow of the Wind",
        "author": "Carlos Ruiz Zafon"
      },
      {
        "title": "The Wind Knows My Name",
        "author": "Isabel Allende"
      },
      {
        "title": "The Wind-Up Bird Chronicle",
        "author": "Haruki Murakami"
      },
      {
        "title": "The lost boy",
        "author": "Camilla L\u00e4ckberg"
      },
      {
        "title": "The siege",
        "author": "Arturo P\u00e9rez-Reverte"
      },
      {
        "title": "To Build a Fire",
        "author": "Chabout\u00e9"
      },
      {
        "title": "Trieste",
        "author": "Da\u0161a Drndi\u0107"
      },
      {
        "title": "Unwanted",
        "author": "Kristina Ohlsson"
      },
      {
        "title": "Vincent",
        "author": "Barbara Stok"
      },
      {
        "title": "When the Cranes Fly South",
        "author": "Lisa Ridz\u00e9n"
      },
      {
        "title": "Your Utopia",
        "author": "Bora Chung"
      }
    ],
    "note": ""
  },
  "Dusting Off the Greats": {
    "books": [
      {
        "title": "1984",
        "author": "George Orwell"
      },
      {
        "title": "Adventures of Huckleberry Finn",
        "author": "Mark Twain"
      },
      {
        "title": "Anna Karenina",
        "author": "Leo Tolstoy"
      },
      {
        "title": "Catch-22",
        "author": "Joseph Heller"
      },
      {
        "title": "Crime and Punishment",
        "author": "Fyodor Dostoevsky"
      },
      {
        "title": "David Copperfield",
        "author": "Charles Dickens"
      },
      {
        "title": "Don Quixote",
        "author": "Miguel de Cervantes"
      },
      {
        "title": "Dracula",
        "author": "Bram Stoker"
      },
      {
        "title": "Fahrenheit 451",
        "author": "Ray Bradbury"
      },
      {
        "title": "Faust",
        "author": "Johann Wolfgang von Goethe"
      },
      {
        "title": "Frankenstein",
        "author": "Mary Shelley"
      },
      {
        "title": "Great Expectations",
        "author": "Charles Dickens"
      },
      {
        "title": "Gulliver's Travels",
        "author": "Jonathan Swift"
      },
      {
        "title": "Hamlet",
        "author": "William Shakespeare"
      },
      {
        "title": "Heart of Darkness",
        "author": "Joseph Conrad"
      },
      {
        "title": "Jane Eyre",
        "author": "Charlotte Bront\u00eb"
      },
      {
        "title": "Les Mis\u00e9rables",
        "author": "Victor Hugo"
      },
      {
        "title": "Lolita",
        "author": "Vladimir Nabokov"
      },
      {
        "title": "Lord of the Flies",
        "author": "William Golding"
      },
      {
        "title": "Madame Bovary",
        "author": "Gustave Flaubert"
      },
      {
        "title": "Moby-Dick",
        "author": "Herman Melville"
      },
      {
        "title": "Mrs. Dalloway",
        "author": "Virginia Woolf"
      },
      {
        "title": "Of Mice and Men",
        "author": "John Steinbeck"
      },
      {
        "title": "One Flew Over the Cuckoo's Nest",
        "author": "Ken Kesey"
      },
      {
        "title": "One Hundred Years of Solitude",
        "author": "Gabriel Garc\u00eda M\u00e1rquez"
      },
      {
        "title": "Pride and Prejudice",
        "author": "Jane Austen"
      },
      {
        "title": "Rebecca",
        "author": "Daphne du Maurier"
      },
      {
        "title": "The Age of Innocence",
        "author": "Edith Wharton"
      },
      {
        "title": "The Brothers Karamazov",
        "author": "Fyodor Dostoevsky"
      },
      {
        "title": "The Canterbury Tales",
        "author": "Geoffrey Chaucer"
      },
      {
        "title": "The Count of Monte Cristo",
        "author": "Alexandre Dumas"
      },
      {
        "title": "The Grapes of Wrath",
        "author": "John Steinbeck"
      },
      {
        "title": "The Great Gatsby",
        "author": "F. Scott Fitzgerald"
      },
      {
        "title": "The Iliad",
        "author": "Homer"
      },
      {
        "title": "The Odyssey",
        "author": "Homer"
      },
      {
        "title": "The Scarlet Letter",
        "author": "Nathaniel Hawthorne"
      },
      {
        "title": "The Stranger",
        "author": "Albert Camus"
      },
      {
        "title": "The Sun Also Rises",
        "author": "Ernest Hemingway"
      },
      {
        "title": "The Trial",
        "author": "Franz Kafka"
      },
      {
        "title": "Their Eyes Were Watching God",
        "author": "Zora Neale Hurston"
      },
      {
        "title": "Things Fall Apart",
        "author": "Chinua Achebe"
      },
      {
        "title": "To Kill a Mockingbird",
        "author": "Harper Lee"
      },
      {
        "title": "To the Lighthouse",
        "author": "Virginia Woolf"
      },
      {
        "title": "Tropic of Cancer",
        "author": "Henry Miller"
      },
      {
        "title": "Ulysses",
        "author": "James Joyce"
      },
      {
        "title": "Uncle Tom's Cabin",
        "author": "Harriet Beecher Stowe"
      },
      {
        "title": "War and Peace",
        "author": "Leo Tolstoy"
      },
      {
        "title": "Wuthering Heights",
        "author": "Emily Bront\u00eb"
      }
    ],
    "note": ""
  },
  "Read Between the Goalposts": {
    "books": [
      {
        "title": "A Prayer for Owen Meany",
        "author": "John Irving"
      },
      {
        "title": "A Season Inside: One Year in College Basketball",
        "author": "John Feinstein"
      },
      {
        "title": "All American Boys",
        "author": "Jason Reynolds"
      },
      {
        "title": "All In: An Autobiography",
        "author": "Billie Jean King"
      },
      {
        "title": "American Pastimes",
        "author": "Red Smith"
      },
      {
        "title": "Apples Never Fall",
        "author": "Liane Moriarty"
      },
      {
        "title": "Beartown",
        "author": "Fredrik Backman"
      },
      {
        "title": "Between Sundays",
        "author": "Karen Kingsbury"
      },
      {
        "title": "Boleto",
        "author": "Alyson Hagy"
      },
      {
        "title": "Counting Coup",
        "author": "Larry Colton"
      },
      {
        "title": "Football",
        "author": "John Schulian"
      },
      {
        "title": "For the Glory",
        "author": "Duncan Hamilton"
      },
      {
        "title": "Full-Court Quest",
        "author": "Linda S. Peavy"
      },
      {
        "title": "Hello Beautiful",
        "author": "Ann Napolitano"
      },
      {
        "title": "Horse",
        "author": "Geraldine Brooks"
      },
      {
        "title": "I had a Hammer: The Hank Aaron Story",
        "author": "Hank Aaron"
      },
      {
        "title": "Indian Horse",
        "author": "Richard Wagamese"
      },
      {
        "title": "Life: The Universe and Everything",
        "author": "Douglas Adams"
      },
      {
        "title": "Lion & Lamb",
        "author": "James Patterson"
      },
      {
        "title": "Mrs. Plansky Goes Rogue",
        "author": "Spencer Quinn"
      },
      {
        "title": "My Prison without Bars",
        "author": "Pete Rose"
      },
      {
        "title": "Night of Thunder",
        "author": "Stephen Hunter"
      },
      {
        "title": "One Sweet Quarrel",
        "author": "Deirdre McNamer"
      },
      {
        "title": "One of Us is Lying",
        "author": "Karen M. McManus"
      },
      {
        "title": "Paradise found",
        "author": "Bill Plaschke"
      },
      {
        "title": "Playing for Keeps",
        "author": "David Halberstam"
      },
      {
        "title": "Playing for Pizza",
        "author": "John Grisham"
      },
      {
        "title": "Say Hey: The Autobiography of Willie Mays",
        "author": "Willie Mays"
      },
      {
        "title": "Sooley",
        "author": "John Grisham"
      },
      {
        "title": "The Art of Racing in the Rain",
        "author": "Garth Stein"
      },
      {
        "title": "The Big Bam",
        "author": "Leigh Montville"
      },
      {
        "title": "The Boys of Riverside",
        "author": "Thomas Fuller"
      },
      {
        "title": "The Eagles of Heart Mountain",
        "author": "Bradford Pearson"
      },
      {
        "title": "The Eleventh Man",
        "author": "Ivan Doig"
      },
      {
        "title": "The Fighter Within",
        "author": "B. J. Clark"
      },
      {
        "title": "The Football Hall of Shame",
        "author": "Bruce Nash"
      },
      {
        "title": "The Game I Love",
        "author": "Sam Snead"
      },
      {
        "title": "The Great American Sports Page",
        "author": "John Schulian"
      },
      {
        "title": "The Lazy Boy",
        "author": "Jane Leavy"
      },
      {
        "title": "The Mothers",
        "author": "Brit Bennett"
      },
      {
        "title": "The Natural",
        "author": "Bernard Malamud"
      },
      {
        "title": "The Redheaded Outfield and Other Baseball Stories",
        "author": "Zane Grey"
      },
      {
        "title": "True Believers",
        "author": "Joe Queenan"
      },
      {
        "title": "Ultramarathon Man",
        "author": "Dean Karnazes"
      },
      {
        "title": "Why Didn't They Ask Evans?",
        "author": "Agatha Christie"
      },
      {
        "title": "Why We Love Football",
        "author": "Various"
      }
    ],
    "note": ""
  },
  "Pa P Er Cu Ts": {
    "books": [],
    "note": "Choose an element from the Periodic Table in the Children's Section and bring it to the Circulation Desk for your book assignment. You get ONE re-do if you do not like your first book."
  },
  "Nostalgic Rewind": {
    "books": [
      {
        "title": "11/22/63",
        "author": "Stephen King"
      },
      {
        "title": "A Brief History of Seven Killings",
        "author": "Marlon James"
      },
      {
        "title": "A Christmas Carol",
        "author": "Charles Dickens"
      },
      {
        "title": "A Clockwork Orange",
        "author": "Anthony Burgess"
      },
      {
        "title": "A Cold Day for Murder",
        "author": "Dana Stabenow"
      },
      {
        "title": "A Good American",
        "author": "Alex George"
      },
      {
        "title": "A Man Called Ove",
        "author": "Fredrik Backman"
      },
      {
        "title": "A Time to Kill",
        "author": "John Grisham"
      },
      {
        "title": "After You",
        "author": "Jojo Moyes"
      },
      {
        "title": "All the Light We Cannot See",
        "author": "Anthony Doerr"
      },
      {
        "title": "Bird by Bird",
        "author": "Anne Lamott"
      },
      {
        "title": "Blood and Thunder",
        "author": "Hampton Sides"
      },
      {
        "title": "Breakfast at Tiffany's",
        "author": "Truman Capote"
      },
      {
        "title": "Bring Up the Bodies",
        "author": "Hilary Mantel"
      },
      {
        "title": "Buffalo Coat",
        "author": "Carol Brink"
      },
      {
        "title": "Charming Billy",
        "author": "Alice McDermott"
      },
      {
        "title": "Circling the Sun",
        "author": "Paula McLain"
      },
      {
        "title": "Dead Wake",
        "author": "Erik Larson"
      },
      {
        "title": "Devil in the White City",
        "author": "Erik Larson"
      },
      {
        "title": "Do Them No Harm!",
        "author": "Zoa Swayne"
      },
      {
        "title": "Down the Great Unknown",
        "author": "Edward Dolnick"
      },
      {
        "title": "Ender's Game",
        "author": "Orson Scott Card"
      },
      {
        "title": "Firefly Lane",
        "author": "Kristen Hannah"
      },
      {
        "title": "Franklin & Winston",
        "author": "Jon Meacham"
      },
      {
        "title": "Ghost Train to the Eastern Star",
        "author": "Paul Theroux"
      },
      {
        "title": "Gold Camps & Silver Cities",
        "author": "Merle W. Wells"
      },
      {
        "title": "Gorillas in the Mist",
        "author": "Dian Fossey"
      },
      {
        "title": "Heartburn",
        "author": "Nora Ephron"
      },
      {
        "title": "Hiroshima",
        "author": "John Hersey"
      },
      {
        "title": "How Children Succeed",
        "author": "Paul Tough"
      },
      {
        "title": "How the Garcia Girls Lost Their Accents",
        "author": "Julia Alvarez"
      },
      {
        "title": "How to Build a Girl",
        "author": "Caitlin Moran"
      },
      {
        "title": "How to Raise the Perfect Dog",
        "author": "Cesar Millan"
      },
      {
        "title": "In the Kingdom of Ice: The Grand and Terrible Polar Voyage of the USS Jeannette",
        "author": "Hampton Sides"
      },
      {
        "title": "Jaws",
        "author": "Peter Benchley"
      },
      {
        "title": "Lord of the Rings",
        "author": "J.R.R. Tolkien"
      },
      {
        "title": "Maus: A Survivors Tale",
        "author": "Art Spiegelman"
      },
      {
        "title": "Mayflower: A Story of Courage, Community, and War",
        "author": "Nathaniel Philbrick"
      },
      {
        "title": "Mein Kampf",
        "author": "Adolf Hitler"
      },
      {
        "title": "Memoirs of a Geisha",
        "author": "Arthur Golden"
      },
      {
        "title": "Midnight in the Garden of Good and Evil",
        "author": "John Berendt"
      },
      {
        "title": "My Year of Meats",
        "author": "Ruth Ozeki"
      },
      {
        "title": "Omnivore's Dilemma",
        "author": "Michael Pollan"
      },
      {
        "title": "Outlander",
        "author": "Diana Gabaldon"
      },
      {
        "title": "Outliers",
        "author": "Malcolm Gladwell"
      },
      {
        "title": "Paradise Lost",
        "author": "John Milton"
      },
      {
        "title": "Poisoned Progress",
        "author": "David E. Williams"
      },
      {
        "title": "Poland",
        "author": "James A. Michener"
      },
      {
        "title": "Quest",
        "author": "Nelson DeMille"
      },
      {
        "title": "Red Rising",
        "author": "Pierce Brown"
      },
      {
        "title": "Ride Cowboy Ride",
        "author": "Baxter Black"
      },
      {
        "title": "Running Blind",
        "author": "Lee Child"
      },
      {
        "title": "Saturn Run",
        "author": "John Sanford"
      },
      {
        "title": "Schindler's List",
        "author": "Thomas Keneally"
      },
      {
        "title": "Sea Wolf",
        "author": "Jack London"
      },
      {
        "title": "Short of a Good Promise",
        "author": "William Vern Studebaker"
      },
      {
        "title": "Slaughterhouse Five",
        "author": "Kurt Vonnegut"
      },
      {
        "title": "Suicide or Murder?",
        "author": "Vardis Fisher"
      },
      {
        "title": "The Adventure of Tom Sawyer",
        "author": "Mark Twain"
      },
      {
        "title": "The Bell Jar",
        "author": "Sylvia Plath"
      },
      {
        "title": "The Boston Girl",
        "author": "Anita Diamant"
      },
      {
        "title": "The Boy Who Harnessed the Wind",
        "author": "William Kamkwamba and Bryan Mealer"
      },
      {
        "title": "The Boys in the Boat",
        "author": "Daniel Brown"
      },
      {
        "title": "The Ender's Hotel",
        "author": "Brandon R. Schrand"
      },
      {
        "title": "The Eye of the World",
        "author": "Robert Jordan"
      },
      {
        "title": "The Fault in Our Stars",
        "author": "John Green"
      },
      {
        "title": "The Great Influenza",
        "author": "John Barry"
      },
      {
        "title": "The Help",
        "author": "Kathryn Stockett"
      },
      {
        "title": "The Huckleberry Murders",
        "author": "Patrick McManus"
      },
      {
        "title": "The Joy Luck Club",
        "author": "Amy Tan"
      },
      {
        "title": "The Last American Cowboy",
        "author": "Mike R. Dunbar"
      },
      {
        "title": "The Lemon Orchard",
        "author": "Luanne Rice"
      },
      {
        "title": "The Life and Adventure of Nicholas Nickleby",
        "author": "Charles Dickens"
      },
      {
        "title": "The Lotus Eaters",
        "author": "Tatjana Soli"
      },
      {
        "title": "The Martian",
        "author": "Andy Weir"
      },
      {
        "title": "The Night Circus",
        "author": "Erin Morgenstern"
      },
      {
        "title": "The Not So Big House: A Blueprint for the Way We Really Live",
        "author": "Sarah Susanka"
      },
      {
        "title": "The Orchid Thief",
        "author": "Susan Orlean"
      },
      {
        "title": "The Road Less Traveled",
        "author": "M. Scott Peck"
      },
      {
        "title": "The Secret Life of Bees",
        "author": "Sue Monk Kidd"
      },
      {
        "title": "The Shadow of the Pomegranate",
        "author": "Jean Plaidy"
      },
      {
        "title": "The Swiss Family Robinson",
        "author": "Johann Wyss"
      },
      {
        "title": "Thirteen",
        "author": "Richard Morgan"
      },
      {
        "title": "Two if by Sea",
        "author": "Jacquelyn Mitchard"
      },
      {
        "title": "Waiting for Snow in Havana",
        "author": "Carlos Eire"
      },
      {
        "title": "Water for Elephants",
        "author": "Sara Gruen"
      },
      {
        "title": "Where Rivers Change Direction",
        "author": "Mark Spragg"
      },
      {
        "title": "Where the Red Fern Grows",
        "author": "Wilson Rawls"
      },
      {
        "title": "White Poplar, Black Locust",
        "author": "Louise Wagenknecht"
      },
      {
        "title": "Wind River",
        "author": "Connie Seibert with Sandy Maxwell"
      },
      {
        "title": "Wolf Hall",
        "author": "Hilary Mantel"
      },
      {
        "title": "World's Fair",
        "author": "E.L. Doctorow"
      },
      {
        "title": "Wuthering Heights",
        "author": "Emily Bront\u00eb"
      }
    ],
    "note": ""
  },
  "Cheers to the New Year": {
    "books": [
      {
        "title": "A Prayer for Owen Meany",
        "author": "John Irving"
      },
      {
        "title": "All American Boys",
        "author": "Jason Reynolds"
      },
      {
        "title": "Apples Never Fall",
        "author": "Liane Moriarty"
      },
      {
        "title": "Beartown",
        "author": "Fredrik Backman"
      },
      {
        "title": "Between Sundays",
        "author": "Karen Kingsbury"
      },
      {
        "title": "Boleto",
        "author": "Alyson Hagy"
      },
      {
        "title": "Hello Beautiful",
        "author": "Ann Napolitano"
      },
      {
        "title": "Horse",
        "author": "Geraldine Brooks"
      },
      {
        "title": "Indian Horse",
        "author": "Richard Wagamese"
      },
      {
        "title": "Life: The Universe and Everything",
        "author": "Douglas Adams"
      },
      {
        "title": "Lion & Lamb",
        "author": "James Patterson"
      },
      {
        "title": "Mrs. Plansky Goes Rogue",
        "author": "Spencer Quinn"
      },
      {
        "title": "Night of Thunder",
        "author": "Stephen Hunter"
      },
      {
        "title": "One Sweet Quarrel",
        "author": "Deirdre McNamer"
      },
      {
        "title": "One of Us is Lying",
        "author": "Karen M. McManus"
      },
      {
        "title": "Playing for Pizza",
        "author": "John Grisham"
      },
      {
        "title": "Sooley",
        "author": "John Grisham"
      },
      {
        "title": "The Art of Racing in the Rain",
        "author": "Garth Stein"
      },
      {
        "title": "The Eleventh Man",
        "author": "Ivan Doig"
      },
      {
        "title": "The Fighter Within",
        "author": "B. J. Clark"
      },
      {
        "title": "The Mothers",
        "author": "Brit Bennett"
      },
      {
        "title": "The Natural",
        "author": "Bernard Malamud"
      },
      {
        "title": "The Redheaded Outfield and Other Baseball Stories",
        "author": "Zane Grey"
      },
      {
        "title": "Why Didn't They Ask Evans?",
        "author": "Agatha Christie"
      }
    ],
    "note": "Come into the library during the month of January to receive your book. You get ONE re-do if you do not like the first book."
  },
  "Code Breaker": {
    "books": [
      {
        "title": "Airborn (Dlueruq)",
        "author": "Kenneth Oppel"
      },
      {
        "title": "Aleph (Dohsk)",
        "author": "Paulo Coelho"
      },
      {
        "title": "Annie (Dqqlh)",
        "author": "Thomas Meehan"
      },
      {
        "title": "Atmosphere (Dwprvskhuh)",
        "author": "Taylor Jenkins Reid"
      },
      {
        "title": "Blake (Eodnh)",
        "author": "Peter Ackroyd"
      },
      {
        "title": "Blooxline (Eorraolqh)",
        "author": "Claudia Gray"
      },
      {
        "title": "Bluebeard (Eoxhehdug)",
        "author": "Kurt Vonnegut"
      },
      {
        "title": "Books (Errnv)",
        "author": "Larry McMurtry"
      },
      {
        "title": "Caramello (Fdudphoor)",
        "author": "Sandra Cisneros"
      },
      {
        "title": "Christine (Fkulvwlqh)",
        "author": "Stephen King"
      },
      {
        "title": "Class (Fodvv)",
        "author": "Lucinda Rosenfeld"
      },
      {
        "title": "Codebreakers (Frgheuhdnhuv)",
        "author": "Carey Malloy"
      },
      {
        "title": "Coma (Frpd)",
        "author": "Robin Cook"
      },
      {
        "title": "Commonwealth (Frpprqzhdowk)",
        "author": "Ann Patchett"
      },
      {
        "title": "Confess (Frqihvv)",
        "author": "Colleen Hoover"
      },
      {
        "title": "Delirium (Gholulxp)",
        "author": "Lauren Oliver"
      },
      {
        "title": "Disproven (Glvsuryhq)",
        "author": "Ken Block"
      },
      {
        "title": "Dogtown (Grjwrzq)",
        "author": "Elyssa East"
      },
      {
        "title": "Dune (Gxqh)",
        "author": "Brian Herbert"
      },
      {
        "title": "Dustoff (Gxvwrii)",
        "author": "Michael J. Novosel"
      },
      {
        "title": "Edison (Hglvrq)",
        "author": "Edmund Morris"
      },
      {
        "title": "Flu (Iox)",
        "author": "Gina Bari Kolata"
      },
      {
        "title": "Framed (Iudphg)",
        "author": "John Grisham"
      },
      {
        "title": "Germs (Jhupv)",
        "author": "Judith Miller"
      },
      {
        "title": "Ghoster (Jkrvwhu)",
        "author": "Jason Arnopp"
      },
      {
        "title": "Gold (Jrog)",
        "author": "Chris Cleave"
      },
      {
        "title": "Hailstone (Kdlovwrqh)",
        "author": "Rafael Scavone"
      },
      {
        "title": "Hide (Klgh)",
        "author": "Lisa Gardner"
      },
      {
        "title": "Illegal (Loohjdo)",
        "author": "Eoin Colfer"
      },
      {
        "title": "James (Mdphv)",
        "author": "Percival Everett"
      },
      {
        "title": "Justice (Mxvwlfh)",
        "author": "Larry Watson"
      },
      {
        "title": "Katabasis (Ndwdedvlv)",
        "author": "R.F. Kuang"
      },
      {
        "title": "Kilcaraig (Nlofdudlj)",
        "author": "Annabel Carothers"
      },
      {
        "title": "Kingdom (Nlqjgrp)",
        "author": "Jon McNaught"
      },
      {
        "title": "Later (Odwhu)",
        "author": "Stephen King"
      },
      {
        "title": "Maid (Pdlg)",
        "author": "Stephanie Land"
      },
      {
        "title": "Never (Qhyhu)",
        "author": "Ken Follett"
      },
      {
        "title": "Outliers (Rxwolhuv)",
        "author": "Malcolm Gladwell"
      },
      {
        "title": "Outlive (Rxwolyh)",
        "author": "Peter Attia"
      },
      {
        "title": "Postcards (Srvwfdugv)",
        "author": "Annie Proulx"
      },
      {
        "title": "Ringworld (Ulqjzruog)",
        "author": "Larry Niven"
      },
      {
        "title": "Sand (Vdqg)",
        "author": "Michael Welland"
      },
      {
        "title": "Sepharad (Vhskdudg)",
        "author": "Antonio Munoz"
      },
      {
        "title": "Songbirds (Vrqjelugv)",
        "author": "Christy Lefteri"
      },
      {
        "title": "Space (Vsdfh)",
        "author": "James A. Michener"
      },
      {
        "title": "Spineless (Vslqhohvv)",
        "author": "Juli Berwald"
      },
      {
        "title": "Standoff (Vwdqgrii)",
        "author": "Jacqueline Keeler"
      },
      {
        "title": "Stick (Vwlfn)",
        "author": "Elmore Leonard"
      },
      {
        "title": "Suttree (Vxwwuhh)",
        "author": "Cormac McCarthy"
      },
      {
        "title": "Terminal (Whuplqdo)",
        "author": "Colin Forbes"
      },
      {
        "title": "Trieste (Wulhvwh)",
        "author": "Da\u0161a Drndi\u0107"
      },
      {
        "title": "Untamed (Xqwdphg)",
        "author": "Glennon Doyle"
      },
      {
        "title": "Unwanted (Xqzdqwhg)",
        "author": "Kristina Ohlsson"
      },
      {
        "title": "Velocity (Yhorflwb)",
        "author": "Dean Koontz"
      }
    ],
    "note": ""
  }
};
        
        let sessionEntries = [];
        
        // Initialize the form
        document.addEventListener('DOMContentLoaded', function() {
            const debugStatus = document.getElementById('debugStatus');
            const statusText = document.getElementById('statusText');
            
            debugStatus.style.display = 'block';
            statusText.textContent = 'Initializing...';
            
            try {
                statusText.textContent = 'Loading book data...';
                
                if (typeof BOOK_DATA === 'undefined') {
                    statusText.textContent = 'ERROR: Book data not loaded!';
                    statusText.style.color = 'red';
                    return;
                }
                
                const catCount = Object.keys(BOOK_DATA).length;
                statusText.textContent = `Found ${catCount} categories. Populating dropdown...`;
                
                populateCategories();
                setupEventListeners();
                
                // Hide debug status after successful load
                setTimeout(() => {
                    debugStatus.style.display = 'none';
                }, 2000);
                
                statusText.textContent = 'Ready!';
                statusText.style.color = 'green';
            } catch (error) {
                statusText.textContent = 'ERROR: ' + error.message;
                statusText.style.color = 'red';
                console.error('Initialization error:', error);
            }
        });
        
        function populateCategories() {
            try {
                console.log('Starting populateCategories...');
                console.log('BOOK_DATA type:', typeof BOOK_DATA);
                console.log('BOOK_DATA keys:', Object.keys(BOOK_DATA));
                
                const categorySelect = document.getElementById('category');
                
                // Clear loading message
                categorySelect.innerHTML = '<option value="">-- Choose a category --</option>';
                
                const categories = Object.keys(BOOK_DATA).sort();
                console.log('Found', categories.length, 'categories');
                
                if (categories.length === 0) {
                    categorySelect.innerHTML = '<option value="">ERROR: No categories found</option>';
                    alert('Error: No book categories loaded. Please refresh the page.');
                    return;
                }
                
                categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    categorySelect.appendChild(option);
                });
                
                console.log('Categories populated successfully');
            } catch (error) {
                console.error('Error in populateCategories:', error);
                alert('Error loading categories: ' + error.message);
            }
        }
        
        function setupEventListeners() {
            const categorySelect = document.getElementById('category');
            const bookSelect = document.getElementById('book');
            
            categorySelect.addEventListener('change', function() {
                const category = this.value;
                bookSelect.innerHTML = '<option value="">-- Choose a book --</option>';
                bookSelect.disabled = true;
                
                const bookCountEl = document.getElementById('bookCount');
                const noteEl = document.getElementById('categoryNote');
                
                if (category) {
                    const categoryData = BOOK_DATA[category];
                    const books = categoryData.books;
                    
                    if (books.length === 0) {
                        bookCountEl.textContent = 'No pre-selected books for this category';
                        noteEl.style.display = 'block';
                        noteEl.textContent = categoryData.note || 'This category requires special selection.';
                    } else {
                        bookCountEl.textContent = `${books.length} books available`;
                        noteEl.style.display = categoryData.note ? 'block' : 'none';
                        noteEl.textContent = categoryData.note || '';
                        
                        books.forEach(book => {
                            const option = document.createElement('option');
                            option.value = JSON.stringify(book);
                            option.textContent = `${book.title} by ${book.author}`;
                            bookSelect.appendChild(option);
                        });
                        
                        bookSelect.disabled = false;
                    }
                } else {
                    bookCountEl.textContent = '';
                    noteEl.style.display = 'none';
                }
            });
            
            document.getElementById('bookForm').addEventListener('submit', handleSubmit);
        }
        
        function handleSubmit(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const category = document.getElementById('category').value;
            const bookJson = document.getElementById('book').value;
            const rating = document.querySelector('input[name="rating"]:checked').value;
            
            if (!bookJson) {
                showError('Please select a book');
                return;
            }
            
            const book = JSON.parse(bookJson);
            
            // Store the entry
            const entry = {
                timestamp: new Date().toISOString(),
                email: email,
                category: category,
                title: book.title,
                author: book.author,
                rating: rating
            };
            
            sessionEntries.push(entry);
            
            // Save to localStorage (simulating database)
            saveEntry(entry);
            
            // Show success and summary
            showSuccess(`Successfully rated "${book.title}"!`);
            updateSummary();
            
            // Reset form for next entry (keep email)
            document.getElementById('category').value = '';
            document.getElementById('book').innerHTML = '<option value="">-- First select a category --</option>';
            document.getElementById('book').disabled = true;
            document.getElementById('bookCount').textContent = '';
            document.getElementById('categoryNote').style.display = 'none';
            document.querySelectorAll('input[name="rating"]').forEach(r => r.checked = false);
            
            // Show summary section
            document.getElementById('summary').style.display = 'block';
            document.getElementById('bookForm').style.display = 'none';
        }
        
        function saveEntry(entry) {
    // Save to localStorage as backup
    let entries = JSON.parse(localStorage.getItem('bookfolk_entries') || '[]');
    entries.push(entry);
    localStorage.setItem('bookfolk_entries', JSON.stringify(entries));
    
    // Send to Google Sheets
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzuUQOVuqqGm53dGJxaJpnrNyH5z-GBKblH9auISAW68NIZ-Z0ztF0BYAgmjnpDQwsS/exec';
    
    fetch(WEB_APP_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(entry)
    })
    .then(() => {
        console.log('Entry saved to Google Sheets');
    })
    .catch(error => {
        console.error('Error saving to Google Sheets:', error);
        // Data is still saved locally as backup
    });
}

        
        function updateSummary() {
            const summaryList = document.getElementById('summaryList');
            summaryList.innerHTML = '';
            
            sessionEntries.forEach(entry => {
                const div = document.createElement('div');
                div.className = 'summary-item';
                div.innerHTML = `
                    <strong>${entry.title}</strong><br>
                    <span>${entry.category} â€¢ Rating: ${entry.rating}/5.0</span>
                `;
                summaryList.appendChild(div);
            });
        }
        
        function addAnother() {
            document.getElementById('bookForm').style.display = 'block';
            document.getElementById('summary').style.display = 'none';
            hideMessages();
        }
        
        function showSuccess(message) {
            const el = document.getElementById('successMessage');
            el.textContent = message;
            el.style.display = 'block';
            setTimeout(() => el.style.display = 'none', 5000);
        }
        
        function showError(message) {
            const el = document.getElementById('errorMessage');
            el.textContent = message;
            el.style.display = 'block';
            setTimeout(() => el.style.display = 'none', 5000);
        }
        
        function hideMessages() {
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
        }
        
        // Export data function (for admin/debugging)
        function exportData() {
            const entries = JSON.parse(localStorage.getItem('bookfolk_entries') || '[]');
            const csv = convertToCSV(entries);
            downloadCSV(csv, 'bookfolk_entries.csv');
        }
        
        function convertToCSV(entries) {
            if (entries.length === 0) return '';
            
            const headers = ['Timestamp', 'Email', 'Category', 'Title', 'Author', 'Rating'];
            const rows = entries.map(e => [
                e.timestamp,
                e.email,
                e.category,
                e.title,
                e.author,
                e.rating
            ]);
            
            return [headers, ...rows]
                .map(row => row.map(cell => `"${cell}"`).join(','))
                .join('\n');
        }
        
        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
        }
        
        // Make export function available from console
        window.exportBookData = exportData;
    </script>
</body>
</html>


